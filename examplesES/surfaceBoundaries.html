<!DOCTYPE html>
<html>

<head>
  <title>Surface Boundary Curves</title>

  <script async src="https://cdn.jsdelivr.net/npm/es-module-shims@2.0/dist/es-module-shims.min.js"></script>

  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.175/+esm",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.175/examples/jsm/",
        "verb": "https://cdn.jsdelivr.net/npm/verb-nurbs@3.0/+esm",
        "web-worker": "https://cdn.jsdelivr.net/npm/web-worker@1.5/+esm",
        "tessellate": "./js/tessellateThree.js",
        "scene": "./js/sceneThree.js",
        "codeViewer": "./js/codeViewer.js"
      }
    }
  </script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css">
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>

  <link rel="stylesheet" href="css/example.css">
</head>

<body>
  <div id="viewer">
    <div id="title"></div>
  </div>

<script type="module" id="script">
import verb from 'verb'
import { tessellateCurve, tessellateSurface } from 'tessellate'
import { Scene } from 'scene'

const scene = new Scene()

let degree = 3
let knots = [0, 0, 0, 0, 0.333, 0.666, 1, 1, 1, 1]
let pts = [
  [ [0,   0, -10], [10,   0,  0], [20,   0,   0], [30,   0, 0] , [40,   0,   0], [50,   0,   0] ],
  [ [0, -10,   0], [10, -10, 10], [20, -10,  10], [30, -10, 0] , [40, -10,   0], [50, -10,   0] ],
  [ [0, -20,   0], [10, -20, 10], [20, -20,  10], [30, -20, 0] , [40, -20,  -2], [50, -20, -12] ],
  [ [0, -30,   0], [10, -30,  0], [20, -30, -23], [30, -30, 0] , [40, -30,   0], [50, -30,   0] ],
  [ [0, -40,   0], [10, -40,  0], [20, -40,   0], [30, -40, 4] , [40, -40, -20], [50, -40,   0] ],
  [ [0, -50,  12], [10, -50,  0], [20, -50,  20], [30, -50, 0] , [50, -50, -10], [50, -50, -15] ]
]

let srf = verb.geom.NurbsSurface.byKnotsControlPointsWeights( degree, degree, knots, knots, pts )

srf.boundaries().map( function(x) {
  scene.addCurve( tessellateCurve( x ) )
})

scene.addSurface( tessellateSurface( srf ) )

scene.render()
</script>

<div id="button">Show/Hide Code</div>
<pre><code id="code-container" class="language-javascript"></code></pre>

<script type='module'>
import { setupViewer } from 'codeViewer'

setupViewer()

hljs.highlightAll()
</script>

</body>

</html>
